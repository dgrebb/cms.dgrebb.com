@import './colors-dark.css';
@import './colors-light.css';

:root {
  /* https://www.joshwcomeau.com/shadow-palette/ */
  --shadow-elevation-low: -0.7px 0.9px 1.3px hsl(var(--shadow-color) / 0.34),
    -1.2px 1.5px 2.2px -1.2px hsl(var(--shadow-color) / 0.34),
    -2.8px 3.6px 5.1px -2.5px hsl(var(--shadow-color) / 0.34);
  --shadow-elevation-medium: -0.7px 0.9px 1.3px hsl(var(--shadow-color) / 0.36),
    -2.3px 3px 4.3px -0.8px hsl(var(--shadow-color) / 0.36),
    -5.8px 7.4px 10.6px -1.7px hsl(var(--shadow-color) / 0.36),
    -14.2px 18px 25.8px -2.5px hsl(var(--shadow-color) / 0.36);
  --shadow-elevation-high: -0.7px 0.9px 1.3px hsl(var(--shadow-color) / 0.34),
    -4.1px 5.3px 7.5px -0.4px hsl(var(--shadow-color) / 0.34),
    -7.7px 9.8px 14px -0.7px hsl(var(--shadow-color) / 0.34),
    -12.7px 16.1px 23.1px -1.1px hsl(var(--shadow-color) / 0.34),
    -20.3px 25.8px 36.9px -1.4px hsl(var(--shadow-color) / 0.34),
    -31.7px 40.3px 57.7px -1.8px hsl(var(--shadow-color) / 0.34),
    -48.3px 61.2px 87.7px -2.1px hsl(var(--shadow-color) / 0.34),
    -71.1px 90.2px 129.2px -2.5px hsl(var(--shadow-color) / 0.34);

  --clr-neut-50: #f6f6f6;
  --clr-neut-100: #ececec;
  --clr-neut-200: #dedede;
  --clr-neut-300: #cacaca;
  --clr-neut-400: #a5a5a5;
  --clr-neut-500: #838383;
  --clr-neut-600: #5d5d5d;
  --clr-neut-700: #4a4a4a;
  --clr-neut-800: #2c2c2c;
  --clr-neut-900: #0b0b0b;
  --clr-neut: var(--clr-primary-900);
  --clr-neut-50-rgb: 246, 246, 246;
  --clr-neut-100-rgb: 236, 236, 236;
  --clr-neut-200-rgb: 222, 222, 222;
  --clr-neut-300-rgb: 202, 202, 202;
  --clr-neut-400-rgb: 165, 165, 165;
  --clr-neut-500-rgb: 131, 131, 131;
  --clr-neut-600-rgb: 93, 93, 93;
  --clr-neut-700-rgb: 74, 74, 74;
  --clr-neut-800-rgb: 44, 44, 44;
  --clr-neut-900-rgb: 11, 11, 11;
  --clr-neut-rgb: var(--clr-primary-900-rgb);

  --rim-light-bg: linear-gradient(
    3deg,
    var(--bg-clr) 33%,
    var(--bg-clr) 77%,
    var(--rim-clr) 100%
  );
  --rim-light-mask-bg: linear-gradient(3deg, transparent, var(--rim-clr));

  :focus-visible {
    outline: thin dashed var(--highlight-clr);
  }
}

@layer utilities {
  .dg--light-theme {
    --bg-clr: var(--lemon-50);
    --fg-clr: var(--violet);
    --shadow-color: var(--sunshine-shadow-clr);
    --rim-clr: var(--sunshine);
    --highlight-clr: var(--jasper);

    .nav-home {
      &:hover {
        color: var(--jasper);
      }
    }

    .nav-link {
      opacity: 0.5;
      &:hover {
        opacity: 1;
        border-bottom-color: var(--jasper);
      }
      &.active {
        opacity: 1;
        border-bottom-color: var(--jasper);
        &.subactive:hover {
          opacity: 0.5;
        }
      }
    }

    body {
      background: linear-gradient(
        3deg,
        transparent 0%,
        var(--bg-clr) 35%,
        var(--sunshine) 100%
      );
      scrollbar-color: var(--violet-a30) transparent;
    }

    .flourish {
      background-color: var(--fg-clr);
    }

    .bio-picture {
      filter: sepia(100%) saturate(100%) brightness(87%) hue-rotate(61deg);
    }

    .bio .headline {
      color: var(--violet);
    }

    .links {
      .link {
        a:hover {
          color: var(--jasper);
        }
      }
    }

    .hero-wrap {
      background-color: linear-gradient(
        3deg,
        var(--bg-clr) 0%,
        var(--bg-clr) 33%,
        var(--sunshine) 100%
      );
      &::before {
        background: linear-gradient(3deg, transparent, var(--sunshine));
      }
      .hero {
        filter: brightness(100%);
      }
    }

    .posts-grid {
      .post-link {
        background-color: linear-gradient(
          3deg,
          var(--bg-clr) 0%,
          var(--bg-clr) 33%,
          var(--sunshine) 100%
        );
      }
    }

    .post,
    .transition-elastic-fly-container {
      box-shadow: var(--shadow-elevation-high);
      background: linear-gradient(
        3deg,
        var(--bg-clr) 0%,
        var(--bg-clr) 33%,
        var(--sunshine) 100%
      );
      background-color: var(--bg-clr);
      &::before {
        background: linear-gradient(3deg, transparent, var(--sunshine));
      }
    }

    .post {
      .summary::first-letter {
        color: var(--jasper);
      }
    }

    .syntax-highlighter {
      box-shadow: var(--shadow-elevation-medium);
    }
  }

  /* -----------------------
  ---------- Dark Theme ----
  ----------------------- */
  .dg--dark-theme {
    --fg-clr: var(--moon);
    --bg-clr: var(--rich-black);
    --shadow-color: var(--moonshine-shadow-clr);
    --rim-clr: var(--moonshine);
    --highlight-clr: var(--orange);

    .nav-home,
    .nav-link {
      color: var(--celestial-a75);
    }

    .nav-home {
      &:hover {
        color: var(--orange);
      }
    }

    .nav-link {
      opacity: 0.5;
      &:hover {
        opacity: 1;
        border-bottom-color: var(--orange);
      }
      &.active {
        opacity: 1;
        border-bottom-color: var(--orange);
        &.subactive:hover {
          opacity: 0.5;
        }
      }
    }

    body {
      background: linear-gradient(
        3deg,
        transparent 0%,
        var(--rich-black) 35%,
        var(--moonshine) 100%
      );
      scrollbar-color: var(--celestial-a30) transparent;
    }

    .flourish {
      background-color: var(--fg-clr);
    }

    .bio,
    .footer {
      a {
        border-bottom-color: var(--celestial-a75);
        color: var(--celestial-a75);
        &:hover,
        &:focus {
          border-bottom-color: var(--highlight-clr);
          color: var(--celestial);
        }
      }
    }

    .bio-picture {
      filter: sepia(100%) saturate(43%) brightness(77%) hue-rotate(133deg);
    }

    .links {
      .link {
        a:hover {
          color: var(--orange);
        }
      }
    }

    .posts-grid {
      .post-item {
        filter: brightness(77%);
        &:hover,
        &:focus,
        &:focus-visible,
        &:active {
          filter: brightness(100%);
        }
      }
      .post-link {
        background-color: var(--rim-light-bg);
        &::before {
          background: var(--rim-light-mask-bg);
        }
        .link-bg {
          color: white;
        }
        &:hover,
        &:focus,
        &:focus,
        &:focus-visible,
        &:active {
          .link-bg {
            background-color: rgba(var(--clr-neut-900-rgb), 0.6);
          }
        }
      }
    }

    .hero-wrap {
      background-color: var(--rim-light-bg);
      &::before {
        background: var(--rim-light-mask-bg);
      }
      .hero {
        filter: brightness(77%);
      }
    }

    .privacy,
    .post,
    .category-posts-transition-container {
      box-shadow: var(--shadow-elevation-high);
      background: var(--rim-light-bg), var(--bg-clr);
      &::before {
        background: var(--rim-light-mask-bg);
      }
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      h7 {
        color: var(--celestial-a90);
      }
    }

    .privacy .date mark {
      background-color: var(--highlight-clr);
    }

    .post {
      .summary::first-letter {
        color: var(--orange);
      }
      .pubdate {
        color: var(--celestial-a75);
      }
      .post-title {
        text-shadow: 0 -0.11rem 1.5rem hsl(var(--shadow-color) / 5);
      }
      .post-article {
        a:not(.heading-anchor-link) {
          border-bottom: 1px solid var(--celestial-a75);
          color: var(--celestial-a75);
          &:hover,
          &:focus {
            border-bottom: 1px solid var(--orange);
            color: var(--celestial);
          }
        }
        .heading-anchor-link {
          &:hover,
          &:focus,
          &:focus-visible,
          &:active {
            color: var(--orange);
          }
        }
      }
      code {
        color: var(--celestial-a90);
      }
      blockquote {
        ::before,
        ::after {
          color: var(--celestial-a75);
        }
      }
    }

    .page-navigation-list {
      a {
        color: var(--celestial-a75);
        &:hover,
        &:focus,
        &:focus,
        &:focus-visible,
        &:active,
        &.active {
          color: var(--celestial);
        }
        &.active::after {
          color: var(--orange);
        }
      }
    }

    .syntax-highlighter {
      box-shadow: var(--shadow-elevation-medium);
      background-color: var(--oxford-blue);
      &::before {
        background: var(--rim-light-mask-bg);
      }
      .title,
      .language,
      .code-copy-btn {
        color: var(--celestial-a30);
      }
      .title,
      .language {
        background-color: var(--grape);
      }
      &:hover,
      &:focus {
        .title,
        .language,
        .code-copy-btn {
          color: var(--celestial-a75);
          &:hover,
          &:focus-visible {
            color: var(--light);
          }
        }
      }
    }

    .icon-code-copied {
      color: var(--green);
    }
  }
}
