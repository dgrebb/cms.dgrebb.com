@import './colors-dark.css';
@import './colors-light.css';

:root {
  /* https://www.joshwcomeau.com/shadow-palette/ */
  --shadow-elevation-low: -0.7px 0.9px 1.3px hsl(var(--shadow-color) / 0.34),
    -1.2px 1.5px 2.2px -1.2px hsl(var(--shadow-color) / 0.34),
    -2.8px 3.6px 5.1px -2.5px hsl(var(--shadow-color) / 0.34);
  --shadow-elevation-medium: -0.7px 0.9px 1.3px hsl(var(--shadow-color) / 0.36),
    -2.3px 3px 4.3px -0.8px hsl(var(--shadow-color) / 0.36),
    -5.8px 7.4px 10.6px -1.7px hsl(var(--shadow-color) / 0.36),
    -14.2px 18px 25.8px -2.5px hsl(var(--shadow-color) / 0.36);
  --shadow-elevation-high: -0.7px 0.9px 1.3px hsl(var(--shadow-color) / 0.34),
    -4.1px 5.3px 7.5px -0.4px hsl(var(--shadow-color) / 0.34),
    -7.7px 9.8px 14px -0.7px hsl(var(--shadow-color) / 0.34),
    -12.7px 16.1px 23.1px -1.1px hsl(var(--shadow-color) / 0.34),
    -20.3px 25.8px 36.9px -1.4px hsl(var(--shadow-color) / 0.34),
    -31.7px 40.3px 57.7px -1.8px hsl(var(--shadow-color) / 0.34),
    -48.3px 61.2px 87.7px -2.1px hsl(var(--shadow-color) / 0.34),
    -71.1px 90.2px 129.2px -2.5px hsl(var(--shadow-color) / 0.34);

  --clr-neut-50: #f6f6f6;
  --clr-neut-100: #ececec;
  --clr-neut-200: #dedede;
  --clr-neut-300: #cacaca;
  --clr-neut-400: #a5a5a5;
  --clr-neut-500: #838383;
  --clr-neut-600: #5d5d5d;
  --clr-neut-700: #4a4a4a;
  --clr-neut-800: #2c2c2c;
  --clr-neut-900: #0b0b0b;
  --clr-neut: var(--clr-primary-900);
  --clr-neut-50-rgb: 246, 246, 246;
  --clr-neut-100-rgb: 236, 236, 236;
  --clr-neut-200-rgb: 222, 222, 222;
  --clr-neut-300-rgb: 202, 202, 202;
  --clr-neut-400-rgb: 165, 165, 165;
  --clr-neut-500-rgb: 131, 131, 131;
  --clr-neut-600-rgb: 93, 93, 93;
  --clr-neut-700-rgb: 74, 74, 74;
  --clr-neut-800-rgb: 44, 44, 44;
  --clr-neut-900-rgb: 11, 11, 11;
  --clr-neut-rgb: var(--clr-primary-900-rgb);

  --bg-clr: var(--rich-black);

  :focus-visible {
    outline: 2px dashed var(--highlight-clr);
  }
}

html {
  background-color: var(--bg-clr);
}

.bio,
.footer {
  a {
    border-bottom-color: var(--link-clr);
    color: var(--link-clr);
    &:hover,
    &:focus {
      border-bottom-color: var(--highlight-clr);
      color: var(--highlight-clr);
    }
  }
}

@media (prefers-color-scheme: light) {
  :root {
    /* TODO: copy colors here */
  }
}
html.light-theme {
  --bg-clr: var(--lemon-50);
  --bg-light-clr: var(--lemon-25);
  --bg-gradient: linear-gradient(190deg, var(--sunshine), var(--bg-clr) 333px);
  --fg-clr: var(--violet);
  --fg-clr-o: var(--violet-a90);
  --fg-clr-oo: var(--violet-a75);
  --fg-clr-ooo: var(--violet-50);
  --fg-clr-oooo: var(--violet-a30);
  --highlight-clr: var(--jasper);
  --hardlight-clr: var(--sun);
  --link-clr: var(--fg-clr-oo);
  --link-clr--hover: var(--highlight-clr);
  --mark-bg-clr: var(--green);
  --content-bg-clr: var(--dirty-sidewalk);
  --headshot-filter: sepia(100%) saturate(70%) brightness(85%) hue-rotate(61deg);
  --shadow-color: var(--sunshine-shadow-clr);
  --tag-clr: var(--sand-a50);
  --tag-border-clr: var(--jasper-a50);
  --posts-item-filter: brightness(100%);
  --posts-item-hover-filter: brightness(120%);
  --posts-item-link-bg-clr: rgba(var(--bg-clr), 1);
  --posts-item-link-filter: none;
  --posts-item-link-hover-filter: none;
  --posts-item-link-box-shadow: inset 0 0 9rem 3rem rgba(var(--black), 0.77);
  --posts-item-link-hover-box-shadow: inset 0 0 9rem 3rem
    rgba(var(--black), 0.33);
  --post-hero-filter: none;
  --post-title-text-shadow: 0 0 0 var(--fg-clr),
    0.019em -0.011em 0 var(--sunshine),
    0.015em -0.011em 2px rgba(255, 255, 255, 0.5),
    -1px 1px 2px rgba(0, 0, 0, 0.33);
  --post-blockquote-bg-clr: var(--bg-light-clr);
  --code-copied-clr: var(--darkgreen);
  --code-highlight-bg-clr: var(--green);
  --code-hover-header-clr: var(--fg-clr-oo);
  --code-header-hover-clr: var(--highlight-clr);
  --page-nav-toggle-bg-clr: var(--sun-50);
  --page-nav-toggle-focus-bg-clr: var(--sun-50);
  --page-nav-toggle-clr: var(--lemon-50-a75);
  --page-nav-list-bg-clr: var(--lemon-50-a75);

  /* TODO: remove this line */
  /*  */
  /*  */
  /*  */
  /*  */
  /*  */
  --rim-light-bg: linear-gradient(
    10deg,
    transparent 33%,
    var(--content-bg-clr) 67%,
    var(--hardlight-clr) 233%
  );
  --category-rim-light-bg: linear-gradient(
    35deg,
    var(--bg-clr) 33%,
    var(--bg-clr) 77%,
    var(--hardlight-clr) 180%
  );
  --rim-light-mask-bg: linear-gradient(
    3deg,
    var(--bg-clr) 95%,
    var(--hardlight-clr)
  );
  --category-rim-light-mask-bg: linear-gradient(
    33deg,
    transparent,
    var(--hardlight-clr)
  );
}

/*  */
/*  */
/*  */
/*  */
/*  */
/*  */
/*  */
html.dark-theme {
  --fg-clr: var(--moon);
  --fg-clr-o: var(--celestial-a90);
  --fg-clr-oo: var(--celestial-a75);
  --fg-clr-ooo: var(--celestial-a50);
  --fg-clr-oooo: var(--celestial-a30);
  --hardlight-clr: var(--grape);
  --bg-clr: var(--rich-black);
  --bg-light-clr: var(--oxford-blue);
  --bg-gradient: linear-gradient(190deg, var(--moonshine), var(--bg-clr) 333px);
  --content-bg-clr: var(--blue-rock);
  --shadow-color: var(--moonshine-shadow-clr);
  --rim-clr: var(--moonshine);
  --link-clr: var(--fg-clr-oo);
  --link-clr--hover: var(--celestial);
  --highlight-clr: var(--orange);
  --tag-clr: var(--hardlight-clr);
  --tag-border-clr: var(--fg-clr-oooo);
  --headshot-filter: sepia(100%) saturate(43%) brightness(77%)
    hue-rotate(133deg);
  --posts-item-filter: brightness(77%);
  --posts-item-hover-filter: brightness(99%);
  --posts-item-link-bg-clr: var(--rim-light-bg);
  --posts-item-link-filter: brightness(100%);
  --posts-item-link-hover-filter: brightness(120%);
  --posts-item-link-box-shadow: inset 0 0 7rem 0.5rem rgba(0, 0, 0, 0.77);
  --post-hero-filter: brightness(77%);
  --mark-bg-clr: var(--burnt-orange);
  --code-hover-header-clr: var(--fg-clr-oo);
  --code-header-hover-clr: var(--light);
  --code-copied-clr: var(--green);
  --code-highlight-bg-clr: var(--burnt-orange);
  --page-nav-toggle-bg-clr: var(--oxford-blue-a50);
  --page-nav-toggle-focus-bg-clr: var(--hardlight-clr);
  --page-nav-toggle-active-clr: var(--orange-100-a75);
  --page-nav-list-bg-clr: var(--rich-black-a75);

  --rim-light-bg: linear-gradient(
    10deg,
    transparent 33%,
    var(--content-bg-clr) 77%,
    var(--rim-clr) 111%
  );
  --category-rim-light-bg: linear-gradient(
    35deg,
    var(--bg-clr) 33%,
    var(--bg-clr) 77%,
    var(--rim-clr) 100%
  );
  --rim-light-mask-bg: linear-gradient(3deg, transparent, var(--rim-clr));
  --category-rim-light-mask-bg: linear-gradient(
    33deg,
    transparent,
    var(--rim-clr)
  );
}

.privacy,
.post,
.category-posts-transition-container {
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  h7 {
    color: var(--fg-clr-o);
  }
}

.privacy,
.post {
  @media screen and (min-width: 640px) {
    box-shadow: var(--shadow-elevation-high);
    background: var(--rim-light-bg), var(--content-bg-clr);
    background-size: auto 333px;
    background-repeat: no-repeat;
  }
  &::before {
    @media screen and (min-width: 640px) {
      background: var(--rim-light-mask-bg);
    }
  }
}
.privacy,
.post-article {
  a:not(.heading-anchor-link) {
    border-bottom: 1px solid var(--link-clr);
    color: var(--link-clr);
    &:hover,
    &:focus,
    &:focus-visible {
      border-bottom: 1px solid var(--highlight-clr);
      color: var(--link-clr--hover);
    }
  }
}

.category-posts-transition-container {
  box-shadow: var(--shadow-elevation-low);
  background: var(--rim-light-bg), var(--bg-clr);
  @media screen and (min-width: 640px) {
    box-shadow: var(--shadow-elevation-high);
  }
  &::before {
    background: var(--rim-light-mask-bg);
  }
  @media screen and (min-width: 640px) {
    background: var(--category-rim-light-bg), var(--bg-clr);
    @media screen and (min-width: 640px) {
      box-shadow: var(--shadow-elevation-high);
    }
    &::before {
      background: var(--category-rim-light-mask-bg);
    }
  }
}

@layer utilities {
  .dg--light-theme {
    .syntax-highlighter {
      box-shadow: var(--shadow-elevation-medium);
      background-color: var(--bg-light-clr);
      &::before {
        background: var(--rim-light-mask-bg);
      }
      .title,
      .language,
      .code-copy-btn {
        color: var(--fg-clr-oooo);
      }
      .title,
      .language {
        background-color: var(--hardlight-clr);
      }
      &:hover,
      &:focus {
        .title,
        .language {
          color: var(--code-hover-header-clr);
          &:hover,
          &:focus,
          &:focus-visible {
            color: var(--code-header-hover-clr);
          }
        }
        .code-copy-btn {
          color: var(--code-hover-header-clr);
          &:hover,
          &:active,
          &:focus-visible {
            color: var(--code-header-hover-clr);
          }
        }
      }

      > pre {
        color: var(--fg-clr);
        &:hover,
        &:focus,
        &:focus-visible {
          scrollbar-color: var(--fg-clr-oooo) transparent;

          &::-webkit-scrollbar-thumb {
            background: var(--fg-clr-oooo);
          }
        }
      }

      > div[style] > .line-number-wrap {
        &:hover,
        &:focus,
        &:focus-visible {
          scrollbar-color: var(--fg-clr-oooo) transparent;
          &::-webkit-scrollbar-thumb {
            background: var(--fg-clr-oooo);
          }
        }

        & > table {
          tr:hover,
          tr:focus {
            td:first-child {
              color: var(--highlight-clr);
            }
          }
          td:first-child {
            background: var(--bg-light-clr);
            background: linear-gradient(
              90deg,
              var(--bg-light-clr) 65%,
              var(--bg-light-clr) 81%,
              transparent 100%
            );
            color: var(--fg-clr-oooo);
          }
          tbody {
            tr:first-child td {
              padding-top: 0;
            }
            tr:last-child td {
              padding-bottom: 0;
            }
            tr.highlight {
              td:last-child code {
                border: 1px solid var(--code-highlight-bg-clr);
                background-color: var(--code-highlight-bg-clr);
              }
            }
          }
        }
      }
    }

    .icon-code-copied {
      color: var(--code-copied-clr);
    }

    .post {
      .aside {
        border-image: linear-gradient(
            to bottom,
            transparent,
            var(--fg-clr-oooo),
            transparent
          )
          1;
      }
    }

    .page-navigation {
      h2 {
        color: var(--fg-clr);
      }
      a {
        color: var(--fg-clr);
        &:hover,
        &:focus {
          color: var(--fg-clr-oo);
        }
      }
      a.active {
        color: var(--fg-clr);
      }
    }

    .category-posts-list {
      .post-item {
        .post-item-summary,
        .post-title,
        a,
        p {
          color: var(--fg-clr-oo);
        }
      }
    }

    .page-navigation.mini {
      input#page-navigation-checkbox {
        &:focus,
        &:focus-visible {
          ~ label {
            background-color: var(--page-nav-toggle-focus-bg-clr);
            color: var(--fg-clr);
          }
        }
        ~ .page-navigation-toggle {
          background-color: var(--page-nav-toggle-bg-clr);
          &:hover,
          &:focus,
          &:focus-visible {
            background-color: var(--page-nav-toggle-focus-bg-clr);
            color: var(--link-clr--hover);
          }
        }
        &:checked {
          ~ .page-navigation-toggle {
            background-color: transparent;
            color: var(--fg-clr-ooo);
            &:hover,
            &:focus,
            &:focus-visible {
              background-color: transparent;
              color: var(--link-clr--hover);
            }
            & + .page-navigation-list {
              background-color: var(--page-nav-list-bg-clr);
              label.bottom {
                background-color: transparent;
                color: var(--fg-clr-ooo);
                &:hover,
                &:focus,
                &:focus-visible {
                  color: var(--link-clr--hover);
                }
              }
            }
          }
        }
      }
    }

    .page-navigation-list {
      a {
        transition-duration: var(--transition-duration);
        transition-property: color;
        transition-timing-function: var(--transition-timing-function);
        color: var(--link-clr);
        &:hover,
        &:focus,
        &:focus-visible {
          color: var(--link-clr--hover);
        }
        &.active {
          &:hover,
          &:focus,
          &:focus-visible {
            color: var(--fg-clr);
          }
          &::after {
            color: var(--highlight-clr);
          }
        }
      }
    }
  }

  /* -------------------------------------------------------------------------------------
  ---------- Dark Theme ------------------------------------------------------------------
  -------------------------------------------------------------------------------------- */
  .dg--dark-theme {
    .syntax-highlighter {
      box-shadow: var(--shadow-elevation-medium);
      background-color: var(--bg-light-clr);
      &::before {
        background: var(--rim-light-mask-bg);
      }
      .title,
      .language,
      .code-copy-btn {
        color: var(--fg-clr-oooo);
      }
      .title,
      .language {
        background-color: var(--hardlight-clr);
      }
      &:hover,
      &:focus {
        .title,
        .language {
          color: var(--code-hover-header-clr);
          &:hover,
          &:focus-visible {
            color: var(--code-header-hover-clr);
          }
        }
        .code-copy-btn {
          color: var(--code-hover-header-clr);
          &:hover,
          &:active,
          &:focus-visible {
            color: var(--code-header-hover-clr);
          }
        }
      }

      > pre {
        color: var(--fg-clr);
        &:hover,
        &:focus,
        &:focus-visible {
          scrollbar-color: var(--fg-clr-oooo) transparent;

          &::-webkit-scrollbar-thumb {
            background: var(--fg-clr-oooo);
          }
        }
      }

      > div[style] > .line-number-wrap {
        &:hover,
        &:focus,
        &:focus-visible {
          scrollbar-color: var(--fg-clr-oooo) transparent;
          &::-webkit-scrollbar-thumb {
            background: var(--fg-clr-oooo);
          }
        }

        & > table {
          tr:hover,
          tr:focus {
            td:first-child {
              color: var(--highlight-clr);
            }
          }
          td:first-child {
            background: var(--bg-light-clr);
            background: linear-gradient(
              90deg,
              var(--bg-light-clr) 65%,
              var(--bg-light-clr) 81%,
              transparent 100%
            );
            color: var(--fg-clr-oooo);
          }
          tbody {
            tr:first-child td {
              padding-top: 0;
            }
            tr:last-child td {
              padding-bottom: 0;
            }
            tr.highlight {
              td:last-child code {
                border: 1px solid var(--code-highlight-bg-clr);
                background-color: var(--code-highlight-bg-clr);
              }
            }
          }
        }
      }
    }

    .icon-code-copied {
      color: var(--code-copied-clr);
    }

    .post {
      .aside {
        border-image: linear-gradient(
            to bottom,
            transparent,
            var(--fg-clr-oooo),
            transparent
          )
          1;
      }
    }

    .category-posts-list {
      .post-item {
        .post-item-summary,
        .post-title,
        a,
        p {
          color: var(--fg-clr);
        }
      }
    }

    .page-navigation {
      h2 {
        color: var(--fg-clr);
      }
      a {
        color: var(--fg-clr);
        &:hover,
        &:focus {
          color: var(--link-clr);
        }
      }
      a.active {
        color: var(--link-clr--hover);
      }
    }

    .page-navigation.mini {
      input#page-navigation-checkbox {
        &:focus,
        &:focus-visible {
          ~ label {
            background-color: var(--page-nav-toggle-focus-bg-clr);
            color: var(--link-clr--hover);
          }
        }
        ~ .page-navigation-toggle {
          background-color: var(--page-nav-toggle-bg-clr);
          &:hover,
          &:focus,
          &:focus-visible {
            background-color: var(--page-nav-toggle-focus-bg-clr);
            color: var(--link-clr--hover);
          }
        }
        &:checked {
          ~ .page-navigation-toggle {
            background-color: transparent;
            color: var(--page-nav-toggle-active-clr);
            &:hover,
            &:focus,
            &:focus-visible {
              background-color: transparent;
              color: var(--link-clr--hover);
            }
            & + .page-navigation-list {
              background-color: var(--page-nav-list-bg-clr);
              color: var(--page-nav-toggle-active-clr);
              label.bottom {
                &:hover,
                &:focus,
                &:focus-visible {
                  color: var(--link-clr--hover);
                }
              }
            }
          }
        }
      }
    }

    .page-navigation-list {
      a {
        transition-duration: var(--transition-duration);
        transition-property: color;
        transition-timing-function: var(--transition-timing-function);
        color: var(--link-clr);
        &:hover,
        &:focus,
        &:focus-visible {
          color: var(--link-clr--hover);
        }
        &.active {
          &:hover,
          &:focus,
          &:focus-visible {
            color: var(--fg-clr);
          }
          &::after {
            color: var(--highlight-clr);
          }
        }
      }
    }
  }
}
